
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>The Slurm Workload Manager &#8212; erisDocs 0.1 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=e1a75a79"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'slurmJobs';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">erisDocs 0.1 documentation</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/slurmJobs.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>The Slurm Workload Manager</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">The Slurm Workload Manager</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#partitions-on-erisxdl">Partitions on ERISXdl</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#slurm-and-slurm-adjacent-commands">Slurm and Slurm-Adjacent Commands</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fairshare-and-gpu-charges">Fairshare and GPU Charges</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#slurm-examples">Slurm Examples</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-a-customized-image">Using a Customized Image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-jupyterhub-session">Running a JupyterHub Session</a></li>
</ul>
</li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="the-slurm-workload-manager">
<h1>The Slurm Workload Manager<a class="headerlink" href="#the-slurm-workload-manager" title="Link to this heading">#</a></h1>
<p>Slurm is an open-source load management software that is commonly used by HPC facilities. With Slurm, you can specify the resources your job will use and the partition it will use. HPCs typically use a workload manager so that users use an appropriate amount of resources and as a way to equitably distribute these resources amongst users.</p>
<p><em>Adapted from <a class="reference external" href="https://rc.partners.org/kb/research/computational-resources/erisxdl?article=3719">https://rc.partners.org/kb/research/computational-resources/erisxdl?article=3719</a></em></p>
<section id="partitions-on-erisxdl">
<h2>Partitions on ERISXdl<a class="headerlink" href="#partitions-on-erisxdl" title="Link to this heading">#</a></h2>
<p>ERISXdl has partitions that you submit to based on the length of your job. Here is a quick summary, but the available partitions can be found using <code class="docutils literal notranslate"><span class="pre">sinfo</span></code>.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Partion</p></th>
<th class="head"><p>GPU Limit</p></th>
<th class="head"><p>Max Time Limit</p></th>
<th class="head"><p>Memory Limit</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Basic (Free tier)</p></td>
<td><p>8 GPU</p></td>
<td><p>10 min</p></td>
<td><p>400G</p></td>
</tr>
<tr class="row-odd"><td><p>Short</p></td>
<td><p>8 GPU</p></td>
<td><p>2 hour</p></td>
<td><p>400G</p></td>
</tr>
<tr class="row-even"><td><p>Medium</p></td>
<td><p>8 GPU</p></td>
<td><p>1 day</p></td>
<td><p>400G</p></td>
</tr>
<tr class="row-odd"><td><p>Long</p></td>
<td><p>8 GPU</p></td>
<td><p>5 days</p></td>
<td><p>400G</p></td>
</tr>
<tr class="row-even"><td><p>Mammoth</p></td>
<td><p>8 GPU</p></td>
<td><p>2 weeks</p></td>
<td><p>400G</p></td>
</tr>
</tbody>
</table>
</div>
</section>
<section id="slurm-and-slurm-adjacent-commands">
<h2>Slurm and Slurm-Adjacent Commands<a class="headerlink" href="#slurm-and-slurm-adjacent-commands" title="Link to this heading">#</a></h2>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Action</p></th>
<th class="head"><p>Tag</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Job Name</p></td>
<td><p>–job-name=My-Job_Name</p></td>
</tr>
<tr class="row-odd"><td><p>Wall time hours</p></td>
<td><p>–time=24:0:0   or -t[days-hh:min:sec]</p></td>
</tr>
<tr class="row-even"><td><p>Number of nodes</p></td>
<td><p>–nodes=1</p></td>
</tr>
<tr class="row-odd"><td><p>Number of proc per node</p></td>
<td><p>–ntasks-per-node=24</p></td>
</tr>
<tr class="row-even"><td><p>Number of cores per task</p></td>
<td><p>–cpus-per-task=24</p></td>
</tr>
<tr class="row-odd"><td><p>Number of GPU</p></td>
<td><p>–gpus=3</p></td>
</tr>
<tr class="row-even"><td><p>Send mail at end of the job</p></td>
<td><p>–mail-type=end</p></td>
</tr>
<tr class="row-odd"><td><p>User’s email address</p></td>
<td><p>–mail-user=userid&#64;mgb.edu</p></td>
</tr>
<tr class="row-even"><td><p>Working Directory</p></td>
<td><p>–workdir=dir-name</p></td>
</tr>
<tr class="row-odd"><td><p>Job Restart</p></td>
<td><p>–requeue</p></td>
</tr>
<tr class="row-even"><td><p>Share Nodes</p></td>
<td><p>–shared</p></td>
</tr>
<tr class="row-odd"><td><p>Dedicated nodes</p></td>
<td><p>–exclusive</p></td>
</tr>
<tr class="row-even"><td><p>Memory Size</p></td>
<td><p>–mem=[mem</p></td>
</tr>
<tr class="row-odd"><td><p>Account to Charge</p></td>
<td><p>–account=[account] (*Not required, unless you are associated with</p></td>
</tr>
<tr class="row-even"><td><p>Partition</p></td>
<td><p>–partition=[name]</p></td>
</tr>
<tr class="row-odd"><td><p>Quality of Service</p></td>
<td><p>–qos=[name] (<em>Not required and should be omitted</em>)</p></td>
</tr>
<tr class="row-even"><td><p>Job Arrays</p></td>
<td><p>–array=[array_spec]</p></td>
</tr>
<tr class="row-odd"><td><p>Use specific resource</p></td>
<td><p>–constraint=”XXX”</p></td>
</tr>
</tbody>
</table>
</div>
<p>You can run your job by calling:</p>
<p><code class="docutils literal notranslate"><span class="pre">sbatch</span> <span class="pre">&lt;script</span> <span class="pre">path&gt;</span></code></p>
<p>The commands <code class="docutils literal notranslate"><span class="pre">sacct</span></code> or <code class="docutils literal notranslate"><span class="pre">squeue</span></code> can be used to confirm job status. With <code class="docutils literal notranslate"><span class="pre">squeue</span></code> you can see the status in the <code class="docutils literal notranslate"><span class="pre">ST</span></code> column where:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PD</span></code> means pending.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span></code> means running.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CG</span></code> means completing.</p></li>
</ul>
<p>You can cancel the job at any time by calling:</p>
<p><code class="docutils literal notranslate"><span class="pre">scancel</span> <span class="pre">&lt;jobID&gt;</span></code></p>
<section id="fairshare-and-gpu-charges">
<h3>Fairshare and GPU Charges<a class="headerlink" href="#fairshare-and-gpu-charges" title="Link to this heading">#</a></h3>
<p>Jobs are subjec to the FairShare algorithm, which can be viewed using:</p>
<p><code class="docutils literal notranslate"><span class="pre">sshare</span> <span class="pre">-u</span> <span class="pre">&lt;userID&gt;</span> <span class="pre">-l</span></code></p>
<p>You can view everyone’s score using:</p>
<p><code class="docutils literal notranslate"><span class="pre">sshare</span> <span class="pre">-al</span></code></p>
<p>Remember that it costs money to use the GPU at a rate of $0.01/min per GPU. You can check your personal charges using <code class="docutils literal notranslate"><span class="pre">charges</span> <span class="pre">-u</span></code> and your group charges using <code class="docutils literal notranslate"><span class="pre">charges</span> <span class="pre">-g</span></code>.</p>
</section>
</section>
</section>
<section id="slurm-examples">
<h1>Slurm Examples<a class="headerlink" href="#slurm-examples" title="Link to this heading">#</a></h1>
<p>The sysadmins have helpfully provided us a few ready-made examples. If you are familiar with Slurm, you will still want to look at the submission scripts because there are ERISXdl-specific commands the <em>must</em> be used.</p>
<section id="using-a-customized-image">
<h2>Using a Customized Image<a class="headerlink" href="#using-a-customized-image" title="Link to this heading">#</a></h2>
<p>Copy the first example by calling:</p>
<p><code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">/data/erisxdl/publicERISXdlDemoCases/case1-GPU</span> <span class="pre">$HOME</span></code></p>
<p>Here are the contents of the job script, <code class="docutils literal notranslate"><span class="pre">jobScriptBasicP.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

--partition<span class="o">=</span>Basic
--job-name<span class="o">=</span>exampleCase1
--gpus<span class="o">=</span><span class="m">1</span>
--ntasks<span class="o">=</span><span class="m">1</span>
--time<span class="o">=</span><span class="m">00</span>:10:00
--mem<span class="o">=</span>8G
--output<span class="o">=</span>log.%j
--error<span class="o">=</span>logErrors.%j

<span class="c1">## This is a comment</span>

<span class="c1">## %j is the id for this job</span>

<span class="c1">## Set the docker container image to be used in the job runtime.</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KUBE_IMAGE</span><span class="o">=</span>erisxdl.partners.org/library/cuda:latestWtestProgs

<span class="c1">## Set the script to be run within the specified container - this MUST be a separate script</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KUBE_SCRIPT</span><span class="o">=</span><span class="nv">$SLURM_SUBMIT_DIR</span>/example-script.sh

<span class="c1">## Ensure example-script.sh is executable</span>
chmod<span class="w"> </span>a+x<span class="w">  </span><span class="nv">$SLURM_SUBMIT_DIR</span>/example-script.sh

<span class="c1"># Define group briefcase (this will provide the GID for the user at runtime)</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KUBE_DATA_VOLUME</span><span class="o">=</span>/data/&lt;your<span class="w"> </span>group<span class="err">&#39;</span>s<span class="w"> </span>briefcase<span class="w"> </span>folder&gt;

<span class="c1"># Users can also set the following variable to change the timeout in seconds. It’s 600 by default, but might be useful to change for testing.</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KUBE_INIT_TIMEOUT</span><span class="o">=</span><span class="m">300</span>

<span class="c1">## Required wrapper script. This must be included at the end of the job submission script.</span>
<span class="c1">## This wrapper script mounts /data, and your /PHShome directory into the container </span>
<span class="c1">##</span>
srun<span class="w">  </span>/data/erisxdl/kube-slurm/wrappers/kube-slurm-custom-image-job.sh
</pre></div>
</div>
<p>If you are familiar with Slurm, you might note that there are more than just a few basic commands. In fact, most of this has little to do with your script and you’re really just exporting a bunch of seemingly strange values. You may notice that a script is run at the bottom called <code class="docutils literal notranslate"><span class="pre">kube-slurm-custom-image-job.sh</span></code>. If you look at this script you’ll see that the exported environment variables are being used by this directly. You will just need to change:</p>
<p><code class="docutils literal notranslate"><span class="pre">KUBE_IMAGE</span></code> to your Harbor image.</p>
<p><code class="docutils literal notranslate"><span class="pre">KUBE_DATA_VOLUME</span></code> to your briefcase folder, or alternatively just <code class="docutils literal notranslate"><span class="pre">/data/</span></code>.</p>
<p>and</p>
<p><code class="docutils literal notranslate"><span class="pre">KUBE_SCRIPT</span></code> to direct to your file. <code class="docutils literal notranslate"><span class="pre">$SLURM_SUBMIT_DIR</span></code> will direct to the directory where you called <code class="docutils literal notranslate"><span class="pre">sbatch</span></code> to submit your job.</p>
<p>Here are the contets of <code class="docutils literal notranslate"><span class="pre">example-script.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1"># Full path name to the location of folder &quot;cudaTestPrograms&quot;.</span>
<span class="c1"># Please modify the path accordingly:</span>
<span class="nb">cd</span><span class="w"> </span>~/case1-GPU/cudaTestPrograms


<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;*** Test program compilation ***&quot;</span><span class="w"> </span>
nvcc<span class="w"> </span>vector_add_grid.cu<span class="w"> </span>-o<span class="w"> </span>vector_add_grid

which<span class="w"> </span>vector_add_grid

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;*** Test program iteration: start***&quot;</span><span class="w"> </span>

<span class="c1"># Loop a number of times </span>
<span class="k">for</span><span class="w"> </span>i<span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="o">{</span><span class="m">1</span>..50<span class="o">}</span>
<span class="k">do</span>
<span class="w">   </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Iteration </span><span class="nv">$i</span><span class="s2">&quot;</span>
<span class="w">   </span>./vector_add_grid
<span class="k">done</span>

<span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;*** Test program iteration: end***&quot;</span>
</pre></div>
</div>
<p>The contents of the script are not as important, but you should modify the 5th line <code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">~/case1-GPU/cudaTestPrograms</span></code> to wherever you stored the example script.</p>
<p>Finally, run the job:</p>
<p><code class="docutils literal notranslate"><span class="pre">sbatch</span> <span class="pre">jobScriptBasicP.sh</span></code></p>
</section>
<section id="running-a-jupyterhub-session">
<h2>Running a JupyterHub Session<a class="headerlink" href="#running-a-jupyterhub-session" title="Link to this heading">#</a></h2>
<p>For this example, copy over the second example:
<code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">/data/erisxdl/publicERISXdlDemoCases/case2-JupyterHub-GPU</span> <span class="pre">$HOME</span></code></p>
<p>The job submission script is different this time under the file <code class="docutils literal notranslate"><span class="pre">jobScriptJupyterHubBasicP.sh</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>

<span class="c1">#SBATCH --partition=Basic</span>
<span class="c1">#SBATCH --job-name=jupyterHubDemo</span>
<span class="c1">#SBATCH --gpus=1</span>
<span class="c1">#SBATCH --ntasks=1</span>
<span class="c1">#SBATCH --time=00:10:00</span>
<span class="c1">#SBATCH --mem=8G</span>
<span class="c1">#SBATCH --output=log.%j</span>
<span class="c1">#SBATCH --error=logErrors.%j</span>

<span class="c1"># Base image</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KUBE_IMAGE</span><span class="o">=</span>erisxdl.partners.org/library/jupyter-minimal-notebook:2023-03-03

<span class="c1"># Briefcase path</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">KUBE_DATA_VOLUME</span><span class="o">=</span>/data/&lt;your<span class="w"> </span>group<span class="err">&#39;</span>s<span class="w"> </span>briefcase<span class="w"> </span>folder&gt;

<span class="c1"># Invoke the Job</span>
srun<span class="w"> </span>/data/erisxdl/kube-slurm/wrappers/kube-slurm-jupyter-job.sh
</pre></div>
</div>
<p>Once again we generate environment values for the image and briefcase location. However, our final script is different. If we run the job submission script, we can check the log file and find output similar to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>########################################################
Your Jupyter Notebook URL will be: https://erisxdl.partners.org/jupyter/slurm-job-40592?token=980c481b4ce7a73c3ca6843cdb13c296f1450b4e1a4e3430
########################################################
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You may notice that this is a really great way to get a 10 minute (by using the Basic partition) interactive session. You could quickly run through an initial run of your script to see if runs before using money on it!</p>
<p>I haven’t played around with this enough yet to know if changing the image has a big effect or not.</p>
</div>
<p>There are other examples for running proprietary software or RStudio sessions at <a class="reference external" href="https://rc.partners.org/kb/article/3718">https://rc.partners.org/kb/article/3718</a>.</p>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">The Slurm Workload Manager</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#partitions-on-erisxdl">Partitions on ERISXdl</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#slurm-and-slurm-adjacent-commands">Slurm and Slurm-Adjacent Commands</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#fairshare-and-gpu-charges">Fairshare and GPU Charges</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#slurm-examples">Slurm Examples</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#using-a-customized-image">Using a Customized Image</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#running-a-jupyterhub-session">Running a JupyterHub Session</a></li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Tyler A. Jost
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Tyler A. Jost.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>